var settings=chrome.extension.getBackgroundPage().settings;var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-46737132-1"]);_gaq.push(["_trackPageview"]);function $(a){return document.getElementById(a)}function add_rule_inner(b,d){if(b.length==0){return false}var a=$(d);var c=document.createElement("option");c.value=b;c.text=b;a.appendChild(c);return true}function add_rule(a,c){var b=$(a).value;if(b.length==0){return false}add_rule_inner(b,c);$(a).value="";return true}function remove_rule(c){var a=$(c);var b=a.selectedOptions;if(b.length==0){return false}while(b.length!=0){a.removeChild(b[0])}return true}function onAddRule(){if(add_rule("rule_text","rule_list")){saveRules()}}function onRemoveRule(){if(remove_rule("rule_list")){saveRules()}}function onAddExcludeRule(){if(add_rule("exclude_rule_text","exclude_rule_list")){saveExcludeRules()}}function onRemoveExcludeRule(){if(remove_rule("exclude_rule_list")){saveExcludeRules()}}function showSaveMsg(){$("save_msg").style.opacity="1.0";$("save_msg").className="fadein";setTimeout(function(){$("save_msg").className="fadeout";$("save_msg").style.opacity="0.0"},1000)}function onCookieSyncCheck(){settings.enableCookieSync=$("cookie_sync_check").checked;localStorage.setItem("enableCookieSync",settings.enableCookieSync);showSaveMsg()}function onAutoModeCheck(){var a=$("auto_mode_check").checked;enableElement(a);settings.enableAutoMode=a;localStorage.setItem("enableAutoMode",settings.enableAutoMode);showSaveMsg()}function saveRules(){var a=$("rule_list");var c="";for(var b=0;b<a.length;b++){if(b!=0){c+=escape("\n")}c+=escape(a[b].value)}settings.rules=c;localStorage.setItem("rules",c);chrome.extension.getBackgroundPage().resetRegularRules();showSaveMsg()}function saveExcludeRules(){var b=$("exclude_rule_list");var c="";for(var a=0;a<b.length;a++){if(a!=0){c+=escape("\n")}c+=escape(b[a].value)}settings.excludeRules=c;localStorage.setItem("excludeRules",c);chrome.extension.getBackgroundPage().resetRegularRules();showSaveMsg()}function attr(c,d,a,b){if(d){$(c).removeAttribute(a)}else{$(c).setAttribute(a,b)}}function enableElement(a){attr("rule_text",a,"disabled","disabled");attr("exclude_rule_text",a,"disabled","disabled");attr("add_rule_btn",a,"disabled","disabled");attr("remove_rule_btn",a,"disabled","disabled");attr("add_exclude_rule_btn",a,"disabled","disabled");attr("remove_exclude_rule_btn",a,"disabled","disabled");attr("rule_list",a,"disabled","disabled");attr("exclude_rule_list",a,"disabled","disabled")}function init(){for(var a=0;a<document.all.length;a++){var c=document.all[a];var b=c.getAttribute("i18n");if(b){if(c.nodeName.toLowerCase()=="input"){c.value=chrome.i18n.getMessage(b)}else{c.innerText=chrome.i18n.getMessage(b)}}}if(!settings.enableAutoMode){enableElement(false)}$("cookie_sync_check").onclick=onCookieSyncCheck;$("auto_mode_check").onclick=onAutoModeCheck;$("add_rule_btn").onclick=onAddRule;$("remove_rule_btn").onclick=onRemoveRule;$("add_exclude_rule_btn").onclick=onAddExcludeRule;$("remove_exclude_rule_btn").onclick=onRemoveExcludeRule;chrome.extension.getBackgroundPage().getCrxVersion(function(g){$("crx_version").innerText=g});if(settings.rules){var f=unescape(settings.rules);var d=f.split("\n");for(var a=0;a<d.length;a++){add_rule_inner(d[a],"rule_list")}}if(settings.excludeRules){var e=unescape(settings.excludeRules);var d=e.split("\n");for(var a=0;a<d.length;a++){add_rule_inner(d[a],"exclude_rule_list")}}$("auto_mode_check").checked=settings.enableAutoMode;$("cookie_sync_check").checked=settings.enableCookieSync}window.onload=init;(function(){var b=document.createElement("script");b.type="text/javascript";b.async=true;b.src="https://ssl.google-analytics.com/ga.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)})();
